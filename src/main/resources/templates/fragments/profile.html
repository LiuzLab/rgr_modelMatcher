<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="user-preview(user)">
    <h4 th:text="${user.profile.fullName}"></h4>
    <p th:unless="${user.profile.researcherCategories.isEmpty()}">
        <span th:each="researcherCategory : ${user.profile.researcherCategories}"
              class="badge badge-info"
              th:text="#{'ResearcherCategory.' + ${researcherCategory.name()}}"></span>
    </p>
    <p th:text="${#strings.abbreviate(user.profile.description, 200)}"></p>
    <img th:each="element : ${user.userOrgans}"
         th:src="@{/images/organs/{uberonId}.svg(uberonId=${element.value.uberonId})}"
         th:alt="${#strings.capitalize(element.value.name)}"
         width="32"
         class="mb-3"/>
</div>
<div th:fragment="researcher-position-selection(selectedResearcherPosition)">
    <div th:each="researcherPosition : ${T(ubc.pavlab.rdp.model.enums.ResearcherPosition).values()}"
         th:if="${@applicationSettings.profile.enabledResearcherPositions.contains(researcherPosition.name())}"
         class="form-check-inline">
        <input th:id="${#ids.seq('profile.researcherPosition')}"
               name="researcherPosition"
               class="form-check-input"
               type="checkbox"
               th:value="${researcherPosition.name()}"
               th:checked="${researcherPosition} == ${selectedResearcherPosition}"/>
        <label th:for="${#ids.prev('profile.researcherPosition')}"
               th:text="'I am a ' + #{'ResearcherPosition.' + ${researcherPosition.name()}}"
               class="form-check-label">...</label>
    </div>
</div>
<div th:fragment="researcher-categories-selection(selectedResearcherCategories)">
    <select th:id="${#ids.seq('profile.researcherCategories')}"
            name="researcherCategories"
            class="form-control selectpicker"
            th:title="${selectedResearcherCategories == null} ? 'Show any researcher, or specific categories' : 'Please select one or more categoriesâ€¦'"
            multiple="multiple">
        <option th:each="researcherCategory : ${T(ubc.pavlab.rdp.model.enums.ResearcherCategory).values()}"
                th:if="${@applicationSettings.profile.enabledResearcherCategories.contains(researcherCategory.name())}"
                th:value="${researcherCategory.name()}"
                th:text="#{'ResearcherCategory.' + ${researcherCategory.name()}}"
                th:selected="${#lists.contains(selectedResearcherCategories, researcherCategory)}">...
        </option>
    </select>
</div>
<div th:fragment="ontology-terms-selection(ontology, selectedTerms, termsHaveIcons)">
    <div
            th:classappend="${termsHaveIcons} ? 'form-row'">
        <div th:each="term : ${ontology.terms}" class="form-group"
             th:if="${term.superTerms.isEmpty()}"
             th:classappend="${termsHaveIcons} ? 'col-3 col-md-2 col-lg-1'">
            <div th:if="${term.group}">
                <h5 th:unless="${termsHaveIcons}"
                    th:text="#{'rdp.ontologies.' + ${ontology.name} + '.terms.' + ${term.name} + '.title'}"></h5>
                <div class="form-row">
                    <div th:each="subTerm: ${term.subTerms}"
                         th:class="${term.name == 'gene-centric' ? 'col-1' : 'col-2'}">
                        <div class="form-check-inline">
                            <input type="checkbox"
                                   th:id="${ontology.id} + '-' + ${term.id}"
                                   name="ontologyTerms"
                                   th:attr="data-ontology-id=${ontology.id}"
                                   th:value="${term.id}"
                                   th:checked="${selectedTerms.contains(term)}"
                                   class="form-check-input"/>
                            <label class="form-check-label"
                                   th:text="#{'rdp.ontologies.' + ${ontology.name} + '.terms.' + ${subTerm.name} + '.title'}"
                            ></label>
                        </div>
                    </div>
                </div>
            </div>
            <div th:unless="${term.group}" class="form-check"
                 data-toggle="tooltip"
                 th:title="${term.hasIcon} ? #{'rdp.ontologies.' + ${ontology.name} + '.terms.' + ${term.name} + '.title'}">
                <input type="checkbox"
                       th:id="${ontology.id} + '-' + ${term.id}"
                       name="ontologyTerms"
                       th:attr="data-ontology-id=${ontology.id}"
                       th:value="${term.id}"
                       th:checked="${selectedTerms.contains(term)}"
                       class="form-check-input"/>
                <label th:for="${ontology.id} + '-' + ${term.id}"
                       class="form-check-label">
                    <img th:if="${term.hasIcon}"
                         th:src="@{/images/ontologies/{ontologyName}/{termName}.svg(ontologyName=${ontology.name},termName=${term.name})}"
                         class="img-fluid d-block"/>
                    <th:block th:unless="${term.hasIcon}">
                        <!-- generate a simple textual icon -->
                        <th:block th:if="${termsHaveIcons}">
                            <span th:replace="fragments/ontology::textual-icon(term = ${term})"></span>
                        </th:block>
                        <span th:unless="${termsHaveIcons}"
                              th:text="#{'rdp.ontologies.' + ${ontology.name} + '.terms.' + ${term.name} + '.title'}"></span>
                    </th:block>
                </label>
            </div>
        </div>
    </div>
</div>
</body>
</html>